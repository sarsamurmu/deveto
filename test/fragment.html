<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <title>Fragment</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="./resources/style.css" rel="stylesheet">
    <script src="./../dist/devoid.js"></script>
  </head>

  <body>
    <div renderBox></div>

    <label class="zust-checkbox themeToggle">
      <input type="checkbox" name="themeSwitch" id="themeSwitch" />
      <span></span>
      <span class="zust-unselectable">Dark Theme</span>
    </label>

    <script src="base.js"></script>
    <script type="text/javascript">
      window.addEventListener('DOMContentLoaded', () => {
        const {
          render,
          Component,
          Fragment,
          el,
          LifecycleBuilder
        } = Devoid;

        class FragTest extends Component {
          constructor() {
            super();
            this.data = {
              hasParent: true,
              hasFragment: true,
              hasDummyParagraph: true,
            };
            this.btnRef = {};
            setTimeout(() => {
              console.log(this.btnRef);
            }, 5000);
          }

          build() {
            return el('div', [
              () => this.data.hasParent ? el('div', [
                () => this.data.hasFragment ? new LifecycleBuilder({
                  didMount: () => console.log('Mounted'),
                  didDestroy: () => console.log('Destroyed'),
                  child: new Fragment([
                    el('p', 'Paragraph 1'),
                    el('p', 'Paragraph 2'),
                    el('p', 'Paragraph 3'),
                    'Text Node',
                    el('br'),
                    el('br')
                  ])
                }) : new Fragment([]),
                () => this.data.hasDummyParagraph ? el('p', 'Paragraph Always') : new Fragment([]),
              ]) : el('p', 'No parent'),
              el('button.zust-btn', {
                ref: this.btnRef,
                on: {
                  click: () => {
                    this.data.hasParent = !this.data.hasParent;
                    this.rebuild();
                  }
                },
              }, () => this.data.hasParent ? 'Remove Parent' : 'Add Parent'),
              el('button.zust-btn', {
                on: {
                  click: () => {
                    this.data.hasFragment = !this.data.hasFragment;
                    this.rebuild();
                  }
                },
              }, () => this.data.hasFragment ? 'Remove Fragment' : 'Add Fragment'),
              el('button.zust-btn', {
                on: {
                  click: () => {
                    this.data.hasDummyParagraph = !this.data.hasDummyParagraph;
                    this.rebuild();
                  }
                },
              }, () => this.data.hasDummyParagraph ? 'Remove Dummy Paragraph' : 'Add Dummy Paragraph'),
            ]);
          }
        }
        
        render(new FragTest(), document.querySelector('[renderBox]'));
      });
    </script>
  </body>

</html>
