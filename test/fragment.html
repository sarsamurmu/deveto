<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <title>Fragment</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="./resources/style.css" rel="stylesheet">
    <script src="./../dist/devoid.js"></script>
  </head>

  <body>
    <div renderBox></div>

    <label class="zust-checkbox themeToggle">
      <input type="checkbox" name="themeSwitch" id="themeSwitch" />
      <span></span>
      <span class="zust-unselectable">Dark Theme</span>
    </label>

    <script src="base.js"></script>
    <script type="text/javascript">
      window.addEventListener('DOMContentLoaded', () => {
        const {
          render,
          elements,
          Component,
          Fragment,
          createEl
        } = Devoid;

        const {
          div,
          p,
          button,
          a,
          br,
          textarea
        } = elements;

        const {
          AsyncBuilder,
          ValueNotifier,
          ListenableBuilder,
          LifecycleBuilder
        } = Devoid;

        class FragTest extends Component {
          constructor() {
            super();
            this.data = {
              hasParent: true,
              hasFragment: true,
              hasDummyParagraph: true,
            };
          }

          build() {
            return new div({
              children: [
                  () => this.data.hasParent ? new div({
                  children: () => [
                    () => this.data.hasFragment ? new LifecycleBuilder({
                      didMount: () => {
                        console.log(`Mounted`);
                      },
                      didDestroy: () => {
                        console.log(`Destroyed`);
                      },
                      child: new Fragment([
                        new p({
                          children: 'Paragraph 1'
                        }),
                        new p({
                          children: 'Paragraph 2'
                        }),
                        new p({
                          children: 'Paragraph 3'
                        }),
                        'Text Node',
                        new br(),
                        new br(),
                      ])
                    }) : new Fragment([]),
                    () => this.data.hasDummyParagraph ? new p({
                      children: 'Paragraph Always'
                    }) : new Fragment([]),
                  ]
                }) : new p({
                  children: 'No parent'
                }),
                new button({
                  props: {
                    classList: 'zust-btn'
                  },
                  on: {
                    click: () => {
                      this.data.hasParent = !this.data.hasParent;
                      this.rebuild();
                    }
                  },
                  children: () => this.data.hasParent ? 'Remove Parent' : 'Add Parent'
                }),
                new button({
                  props: {
                    classList: 'zust-btn'
                  },
                  on: {
                    click: () => {
                      this.data.hasFragment = !this.data.hasFragment;
                      this.rebuild();
                    }
                  },
                  children: () => this.data.hasFragment ? 'Remove Fragment' : 'Add Fragment'
                }),
                new button({
                  props: {
                    classList: 'zust-btn'
                  },
                  on: {
                    click: () => {
                      this.data.hasDummyParagraph = !this.data.hasDummyParagraph;
                      this.rebuild();
                    }
                  },
                  children: () => this.data.hasDummyParagraph ? 'Remove Dummy Paragraph' : 'Add Dummy Paragraph'
                }),
              ]
            })
          }
        }
        
        render(new FragTest(), document.querySelector('[renderBox]'));
      });
    </script>
  </body>

</html>
